{% extends "layout.html" %}

{% block title %}{{ _('Projects') }}{% endblock title %}

{% block stylesheets %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/side-bar-style.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/content-style.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/project-table-style.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/dropdownSelection.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/multi-select.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/administration-form.css') }}">

{% endblock stylesheets %}

{% block scripts %}

<script src="{{ url_for('static', filename='js/close-menus.js') }}"></script>
<script src="{{ url_for('static', filename='js/dropdownMenus.js') }}"></script>
<script src="{{ url_for('static', filename='js/multi-select.js') }}"></script>

<script src="{{ url_for('static', filename='plugin/tinymce/tinymce.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/init-tinymce-administration.js') }}"></script>


{% endblock scripts %}

{% block body %}


<div style="display:flex;">

    <form class="side-bar" action="{{ url_for('apply_filter_projects') }}" method="get">


        <label>
          {{ _('Search query') }}:
          <input type="text" class="form-control-sm" name="Search_query">
        </label>


        <label class="multi-select">
            {{ _('Type') }}:
            <select name="Type" multiple>
                <option value="0" >{{ _('All') }}</option>

                <script>
                    var iter = 0;
                </script>

                {% for type in r_types %}

                <option value="" id="noValueType">{{ type }}</option>

                <script>
                    iter++;
                    document.getElementById("noValueType").setAttribute("value", iter.toString(10));
                    document.getElementById("noValueType").removeAttribute("id");
                </script>

                {% endfor %}

            </select>
        </label>



        <label class="multi-select">
            {{ _('Disciplines') }}:
            <select name="Disciplines" multiple>
                <option value="0" >{{ _('All') }}</option>

                <script>
                    var iter = 0;
                </script>

                {% for discip in r_disciplines %}

                <option value="" id="noValueDis">{{ discip }}</option>

                <script>
                    iter++;
                    document.getElementById("noValueDis").setAttribute("value", iter.toString(10));
                    document.getElementById("noValueDis").removeAttribute("id");
                </script>

                {% endfor %}

            </select>
        </label>




        <label class="dropdown">
            {{ _('Research group') }}:
            <select name="Research_group">
                <option value="0">{{ _('All') }}</option>


                <script>
                    iter = 0;
                </script>

                {% for group in r_researchGroups %}

                <option value="" id="noValue">{{ group.name }}</option>

                <script>
                    iter++;
                    document.getElementById("noValue").setAttribute("value", iter.toString(10));
                    document.getElementById("noValue").removeAttribute("id");
                </script>

                {% endfor %}

            </select>
        </label>


        <label class="dropdown">
            {{ _('Status') }}:
            <select name="Status">
                <option value="0">{{ _('All') }}</option>
                <option value="1">{{ _('Available projects only') }}</option>
                <option value="2">{{ _('Assigned projects only') }}</option>
            </select>
        </label>

        <input type="submit" value="{{ _('Search') }}">

    </form>


    <!-- Vanaf hier komen de projecten -->

    <div class="page-content">
        <h1>{{ _('Projects') }}</h1>

         {% if 'admin' in current_user.roles %}

            <button class="page-content-button" data-toggle="modal" data-target="#modal-form-project">{{ _('add project') }}</button>

            <div id="modal-form-project" class="modal fade" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <form class="modal-body administration-form" action="" method="post">
                            <label for="administration-form-title">{{ _('Title') }}:</label>
                            <input type="text" id="administration-form-title" name="Title">

                            <label for="administration-form-max">{{ _('Maxstudents') }}:</label>
                            <input type="number" id="administration-form-max" name="Maxstudents">

                            <label for="administration-form-researchgroup">{{ _('Research group') }}:</label>
                            <div class="dropdown">
                                <select name="Researchgroup" id="administration-form-researchgroup">

                                    <script>
                                        iter = 0;
                                    </script>

                                    {% for group in r_researchGroups %}

                                    <option value="" id="noGroupName">{{ group.name }}</option>

                                    <script>
                                        document.getElementById("noGroupName").setAttribute("value", iter.toString(10));
                                        document.getElementById("noGroupName").removeAttribute("id");
                                        iter++;
                                    </script>

                                    {% endfor %}

                                </select>
                            </div>

                            <label for="administration-form-description">{{ _('description') }}:</label>
                            <div class="administration-form-textarea">
                                <textarea class="tinymce" id="administration-form-description" name="Description"></textarea>
                            </div>

                            <label for="administration-form-type">{{ _('Type') }}:</label>
                            <div class="multi-select">
                                <select id="administration-form-type" name="Type">
                                    <option value="0" >{{ _('All') }}</option>

                                    <script>
                                        iter = 0;
                                    </script>

                                    {% for type in r_types %}

                                    <option value="" id="noType">{{ type }}</option>

                                    <script>
                                        iter++;
                                        document.getElementById("noType").setAttribute("value", iter.toString(10));
                                        document.getElementById("noType").removeAttribute("id");
                                    </script>

                                    {% endfor %}
                                </select>
                            </div>

                            <!-- todo: vervangen zodat er meer promotors kunnen zijn -->
                            <label for="administration-form-promotor">{{ _('Promotors') }}:</label>
                            <input type="text" id="administration-form-promotor" name="Promotor">

                            <!-- todo: vervangen zodat er meerdere tags kunnen zijn -->
                            <label for="administration-form-tags">{{ _('Tags') }}</label>
                            <input type="text" id="administration-form-tags" name="Tags">

                            <label for="administration-form-related">{{ _('Related projects') }}</label>
                            <input type="text" id="administration-form-related" name="Related">

                            <label for="administration-form-active">{{ _('Active') }}:</label>
                            <input type="checkbox" id="administration-form-active" name="Active"><br>

                            <input class="administration-form-submit" type="submit" value="{{ _('Enter') }}">
                        </form>
                    </div>
                </div>
            </div>

        {% endif %}

        <table class="content-table project-table">

            <tr>
                <th class="th-1">{{ _('title') }}</th>
                <th class="th-2">{{ _('research group') }}</th>
                <th class="th-3">{{ _('assigned students') }}</th>
            </tr>

        {% for project in r_projects %}

            <tr>
                <td><a href="{{ url_for('project_page', id=project.ID) }}">"{{ project.title }}"</a></td>
                <td>{{ project.researchGroup }}</td>
                <td>[ 0 / {{ project.maxStudents }} ]</td> <!-- todo: replace 0 by an parameter -->
            </tr>

        {% endfor %}

        </table>

    </div>

</div>

<script>setUpDropdowns()</script>
<script>setUpMultiSelection()</script>

{% endblock body %}