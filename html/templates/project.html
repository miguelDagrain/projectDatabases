{% extends "layout.html" %}

{% block title %}{{ _('Projects') }}{% endblock title %}

{% block stylesheets %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/content-style.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/administration-form.css') }}">

{% endblock stylesheets %}

{% block scripts %}

<script src="{{ url_for('static', filename='plugin/tinymce/tinymce.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/init-tinymce-administration.js') }}"></script>
<script src="{{ url_for('static', filename='js/send-message.js') }}"></script>

{% endblock scripts %}

{% block body %}


<div style="display:flex;">


    <div class="page-content">
        <h1>{{ r_project.title }}</h1>

        {% if 'admin' in current_user.roles %}

            <button class="page-content-button" data-toggle="modal" data-target="#remove-project">{{ _('remove project') }}</button>

            <div id="remove-project" class="modal fade" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <p>{{ _('Are you sure you want to delete this project?') }}</p>
                        </div>
                        <div class="modal-footer">
                            <form action="{{ url_for('apply_remove_project', id=r_project.ID) }}"  method="post">
                                <button class="page-content-button" name="remove" type="submit">{{ _('Yes') }}</button>
                            </form>
                            <button class="page-content-button" name="cancel" data-dismiss="modal">{{ _('No')}}</button>
                        </div>
                    </div>
                </div>
            </div>

        {% endif %}


        <button class="page-content-button" data-toggle="modal" data-target="#modal-form-show-interest">{{ _('express interest') }}</button>

        <div id="modal-form-show-interest" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <form id="show-interest-form" class="modal-body administration-form" action="" method="post">
                        <label for="administration-form-message">{{ _('motivation') }}:</label>
                        <div class="administration-form-textarea input-block">
                            <textarea class="tinymce" id="administration-form-message" name="Description"></textarea>
                        </div>

                        <input class="administration-form-submit" type="submit" value="{{ _('Enter') }}">
                    </form>
                </div>
            </div>
        </div>


        <table class="content-table">
            <tr>
                <th class="th-2">{{ _('promotor') }}</th>
            </tr>
            {% for promotor in r_promotors %}
                <tr>
                <td><a href="{{ url_for('get_person', id=promotor.id) }}">{{ promotor.name }}</a></td>
                </tr>
            {% endfor %}
            <tr>
                <th class="th-2">{{ _('maximum students') }}</th>
            </tr>
            <tr>
                <td>{{ r_project.maxStudents }}</td>
            </tr>
            <tr>
                <th class="th-3">{{ _('research groups') }}</th>
            </tr>
            {% for group in r_researchGroups %}
                <tr>
                    <td><a href="{{ url_for('group_page', id=group.ID ) }}">{{ group.name }}</a></td>
                </tr>
            {% endfor %}
            <tr>
                <th class="th-4">{{ _('description') }}</th>
            </tr>

        </table>
                <td>{{ r_project.desc[0].text | safe }}</td>
        {% for attach in r_attachments %}
            <tr>
                <td><a href="{{ url_for('download', name=attach[0] ) }}" download>{{ attach[1] }}</a></td>
            </tr>
        {% endfor %}

</div>


{% endblock body %}